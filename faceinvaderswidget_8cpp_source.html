<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Lockheed Inanimation: src/faceinvaderswidget.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="LogoE-2.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Lockheed Inanimation
   </div>
   <div id="projectbrief">Capstone Project sponsored by Lockheed Martin at The Pennsylvania State University</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('faceinvaderswidget_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">faceinvaderswidget.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="faceinvaderswidget_8h.html" title="This file contiains the classes for the logic and display of the Face Invaders game. FaceInvadersScene is the object which contains all of the game logic and takes care of visual object animation and collision detection. FaceInvadersWidget is an UI widget manifistation of the FaceInvadersScene object. This can be used to display the game to the user. PlayerItem represents and manages the player object and is responsible for detecting collisions with Invader Objects. Invader represents an &#39;invader&#39; object falling from the skies, which the player attempts to avoid.">faceinvaderswidget.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;QLinearGradient&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;QGraphicsEllipseItem&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;QTimer&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;QTime&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;QThread&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;QFont&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;QGLWidget&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;QSettings&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">const</span> QRect FaceInvadersScene::DefaultGameSize = QRect(0,0, 600, 440);</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#aa4bb7c6f1b5aea7c819ece39025db412">   15</a></span>&#160;<a class="code" href="class_face_invaders_scene.html#aa4bb7c6f1b5aea7c819ece39025db412" title="Default constructor.">FaceInvadersScene::FaceInvadersScene</a>(QWidget *parent):</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    QGraphicsScene(parent), player(new <a class="code" href="class_player_item.html" title="This is the graphics item representing the user in the graphics scene.">PlayerItem</a>()), m_scoreItem(new QGraphicsSimpleTextItem()),</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    m_gameState(InitState), m_gameScore(0), m_invaderScale(1.0), m_invaderSpeed(1)</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    this-&gt;setBackgroundBrush(QBrush(Qt::black));</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <a class="code" href="class_face_invaders_scene.html#ab1bde6b272df7b8f60f9164116c5b352" title="Image to be painted as the background.">background</a> = <span class="keyword">new</span> QImage(QString(<span class="stringliteral">&quot;:/images/background2.png&quot;</span>));</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a> = FaceInvadersScene::DefaultGameSize;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a4694d161ac803234f3e9e7592d89a31a" title="The starting position of player, Y-coordinate is maintained throughout game play.">m_playerStartingPosition</a>.setX(280);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a4694d161ac803234f3e9e7592d89a31a" title="The starting position of player, Y-coordinate is maintained throughout game play.">m_playerStartingPosition</a>.setY(360);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    this-&gt;addItem(<a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a>);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a>-&gt;setPos(<a class="code" href="class_face_invaders_scene.html#a4694d161ac803234f3e9e7592d89a31a" title="The starting position of player, Y-coordinate is maintained throughout game play.">m_playerStartingPosition</a>);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    connect(<a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a>, SIGNAL(PlayerHit()), <span class="keyword">this</span>, SLOT(<a class="code" href="class_face_invaders_scene.html#aff63cd8030aab3c3bce0d911b8e973b2" title="Transitions the game into stopped state.">endGame</a>()));</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    QFont f(<span class="stringliteral">&quot;Helvetica&quot;</span>, 18, QFont::Bold);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;setFont(f);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    QBrush brush(Qt::yellow);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    QPen pen(Qt::black);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;setBrush(brush);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;setPen(pen);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a61a6a18a8e3c9a3a39b99f2dcea7041e" title="Invader has died, award points to player.">alienEvaded</a>(0);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a4a285f1414516ac56e39551c5f2e03ae" title="Makes sure the score is always visible and does not run off the viewable area.">updateScorePosition</a>();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    this-&gt;addItem(<a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;setZValue(1.0f);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="class_face_invaders_scene.html#ac4a7d81aa0f32aca6a92ae84cf85ad07" title="Timer for controlling Invader descent.">m_advanceTimer</a> = <span class="keyword">new</span> QTimer(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    connect(<a class="code" href="class_face_invaders_scene.html#ac4a7d81aa0f32aca6a92ae84cf85ad07" title="Timer for controlling Invader descent.">m_advanceTimer</a>, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(advance()));</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">//Init rand() seed</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">int</span> seed = QTime::currentTime().msec() * QTime::currentTime().second();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    srand(QThread::currentThreadId() * seed);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;}</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#ab1da77fc959b93e02c3199314bb44651">   51</a></span>&#160;<a class="code" href="class_face_invaders_scene.html#ab1da77fc959b93e02c3199314bb44651" title="Destructor.">FaceInvadersScene::~FaceInvadersScene</a>()</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">delete</span> <a class="code" href="class_face_invaders_scene.html#ab1bde6b272df7b8f60f9164116c5b352" title="Image to be painted as the background.">background</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">delete</span> <a class="code" href="class_face_invaders_scene.html#ac4a7d81aa0f32aca6a92ae84cf85ad07" title="Timer for controlling Invader descent.">m_advanceTimer</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a13a4124aaa5c771ebcb471d6c8404cd8">   57</a></span>&#160;QRectF <a class="code" href="class_face_invaders_scene.html#a13a4124aaa5c771ebcb471d6c8404cd8" title="Returns rectangle of the game space.">FaceInvadersScene::getGameScreenSize</a>()</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#ab9797ce388cc9da4e1cdc1051d7166cf">   62</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#ab9797ce388cc9da4e1cdc1051d7166cf" title="Sets the rectangle for the game space.">FaceInvadersScene::setGameScreenSize</a>(QRectF &amp;rect)</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a> = rect;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a4a285f1414516ac56e39551c5f2e03ae" title="Makes sure the score is always visible and does not run off the viewable area.">updateScorePosition</a>();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#ae263c3425680c1dd7dcc57a9333dd72f">   69</a></span>&#160;qreal <a class="code" href="class_face_invaders_scene.html#ae263c3425680c1dd7dcc57a9333dd72f" title="Sets the line past which all invaders are destroyed.">FaceInvadersScene::getInvaderDeathLine</a>()</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a>.height();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a71af6e431a3acf2b8e005776360e8d89">   74</a></span>&#160;FaceInvadersScene::GameState <a class="code" href="class_face_invaders_scene.html#a71af6e431a3acf2b8e005776360e8d89" title="Returns the current state of the game.">FaceInvadersScene::getState</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#ae1b788035f287095a64170191ccb1f69">   79</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_face_invaders_scene.html#ae1b788035f287095a64170191ccb1f69" title="Returns the score of the game.">FaceInvadersScene::getGameScore</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_face_invaders_scene.html#aadd57061e5554e1f297e3a3fe74ef664" title="Maintains the game score.">m_gameScore</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keywordtype">int</span> FaceInvadersScene::getHighScore()<span class="keyword"> const</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> m_highScore;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a1f19412b72b1feeed8c9cf7e690c8dba">   89</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a1f19412b72b1feeed8c9cf7e690c8dba" title="Creates random number of Invaders, positioned randomly throughout the game screen.">FaceInvadersScene::createNewInvaders</a>()</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> != Playing)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">int</span> newInvaders = rand()%2;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; newInvaders; i++)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="class_invader.html">Invader</a> *invader = <span class="keyword">new</span> <a class="code" href="class_invader.html">Invader</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        this-&gt;addItem(invader);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        connect(invader, SIGNAL(AlienDying(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(<a class="code" href="class_face_invaders_scene.html#a61a6a18a8e3c9a3a39b99f2dcea7041e" title="Invader has died, award points to player.">alienEvaded</a>(<span class="keywordtype">int</span>)));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        invader-&gt;setPos(rand()%(<span class="keywordtype">int</span>)<a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a>.width(), -64*<a class="code" href="class_face_invaders_scene.html#a2eb3395d5b63f7d16613de954c405df7" title="The scaling of the invaders, &lt;1 -&gt; smaller, &gt;1 -&gt; larger, 1 -&gt; unscaled.">m_invaderScale</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        invader-&gt;setScale(0.65f + (rand()%35)/100.0f);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    QTimer::singleShot(400+(rand()%700), <span class="keyword">this</span>, SLOT(<a class="code" href="class_face_invaders_scene.html#a1f19412b72b1feeed8c9cf7e690c8dba" title="Creates random number of Invaders, positioned randomly throughout the game screen.">createNewInvaders</a>()));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a2d6e81e83be4f2a2fd4cd1789c2aa62f">  107</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a2d6e81e83be4f2a2fd4cd1789c2aa62f" title="Updates the position of the player (only x-position!)">FaceInvadersScene::updatePlayerPosition</a>(QPoint position)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> != Playing)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    this-&gt;<a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a>-&gt;setPos(position.x()*<a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a>.width()/100,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                         <a class="code" href="class_face_invaders_scene.html#a4694d161ac803234f3e9e7592d89a31a" title="The starting position of player, Y-coordinate is maintained throughout game play.">m_playerStartingPosition</a>.y());</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#aa5137d20e10f027bb0e9320bb4150005">  116</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#aa5137d20e10f027bb0e9320bb4150005" title="Transitions the game into initial state.">FaceInvadersScene::resetGame</a>()</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    QList&lt;QGraphicsItem*&gt; items = this-&gt;items();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">foreach</span>(QGraphicsItem* item, items)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span>(item != <a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a> &amp;&amp; item != <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            this-&gt;removeItem(item);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="keyword">delete</span> item;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="class_face_invaders_scene.html#aadd57061e5554e1f297e3a3fe74ef664" title="Maintains the game score.">m_gameScore</a> = 0;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> = InitState;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a61a6a18a8e3c9a3a39b99f2dcea7041e" title="Invader has died, award points to player.">alienEvaded</a>(0);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#ab73aac7f63fd2a2e90e3fae0cd110b19">  133</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#ab73aac7f63fd2a2e90e3fae0cd110b19" title="Transitions the game into paused state.">FaceInvadersScene::pauseGame</a>()</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> == Paused)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> = Paused;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="class_face_invaders_scene.html#ac4a7d81aa0f32aca6a92ae84cf85ad07" title="Timer for controlling Invader descent.">m_advanceTimer</a>-&gt;stop();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#aff63cd8030aab3c3bce0d911b8e973b2">  142</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#aff63cd8030aab3c3bce0d911b8e973b2" title="Transitions the game into stopped state.">FaceInvadersScene::endGame</a>()</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> == Stopped)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> = Stopped;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="class_face_invaders_scene.html#ac4a7d81aa0f32aca6a92ae84cf85ad07" title="Timer for controlling Invader descent.">m_advanceTimer</a>-&gt;stop();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    emit <a class="code" href="class_face_invaders_scene.html#ab156a7a5bcd88f4e95802186d1c5b35f" title="Idicates game state transition to game over">gameOver</a>(<a class="code" href="class_face_invaders_scene.html#aadd57061e5554e1f297e3a3fe74ef664" title="Maintains the game score.">m_gameScore</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#aa8a9e24901bdd1fd6b38a002ed41c006">  152</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#aa8a9e24901bdd1fd6b38a002ed41c006" title="Transitions the game tion playing state.">FaceInvadersScene::beginGame</a>()</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> == Playing)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="class_face_invaders_scene.html#aa7d72a15dbf69e1db0204cda1dde3f02" title="1 - Game running, 0 - Game not running">m_gameState</a> = Playing;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="class_face_invaders_scene.html#ac4a7d81aa0f32aca6a92ae84cf85ad07" title="Timer for controlling Invader descent.">m_advanceTimer</a>-&gt;start(1000/18);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a1f19412b72b1feeed8c9cf7e690c8dba" title="Creates random number of Invaders, positioned randomly throughout the game screen.">createNewInvaders</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    emit <a class="code" href="class_face_invaders_scene.html#af9777142e18c6760c6a24667b7dba77b" title="Indicates game state transition from stopped to playing">gameStarted</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#ad5265f20e22d3222f37f62ff653e7db1">  163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#ad5265f20e22d3222f37f62ff653e7db1" title="Increase the falling velocity of invaders.">FaceInvadersScene::increaseInvaderSpeed</a>()</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a743a1aa58712f289f2de48baa5b4d3f0">  167</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a743a1aa58712f289f2de48baa5b4d3f0" title="Decrease the falling velocity of invaders.">FaceInvadersScene::decreaseInvaderSpeed</a>()</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a4c96e2b1bb35475c48e2fcdb54e47521">  171</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a4c96e2b1bb35475c48e2fcdb54e47521" title="Set invader speed to specific value.">FaceInvadersScene::setInvaderSpeed</a>(qreal speed)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;{</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a61a6a18a8e3c9a3a39b99f2dcea7041e">  175</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a61a6a18a8e3c9a3a39b99f2dcea7041e" title="Invader has died, award points to player.">FaceInvadersScene::alienEvaded</a>(<span class="keywordtype">int</span> points)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="class_face_invaders_scene.html#aadd57061e5554e1f297e3a3fe74ef664" title="Maintains the game score.">m_gameScore</a> += points;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;setText(QString(<span class="stringliteral">&quot;Score: %1&quot;</span>).arg(<a class="code" href="class_face_invaders_scene.html#aadd57061e5554e1f297e3a3fe74ef664" title="Maintains the game score.">m_gameScore</a>,5,10,QChar(<span class="charliteral">&#39;0&#39;</span>)));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a4a285f1414516ac56e39551c5f2e03ae" title="Makes sure the score is always visible and does not run off the viewable area.">updateScorePosition</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a0d4282c5b1e179f1c5f4354face8094c">  183</a></span>&#160;QPixmap *<a class="code" href="class_face_invaders_scene.html#a0d4282c5b1e179f1c5f4354face8094c" title="Get Player image.">FaceInvadersScene::getPlayerImage</a>()</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a>-&gt;<a class="code" href="class_player_item.html#a553898aaf5a5d672b819fa95d3e2387e" title="Gets the face image of the player.">getFace</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a87af093f26eae22e01bc05eb64019700">  188</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a87af093f26eae22e01bc05eb64019700" title="Sets the player image.">FaceInvadersScene::setPlayerImage</a>(<span class="keyword">const</span> QPixmap &amp;image)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a2bea286ea79f59374e57e4ce2a8dcfd0" title="PlayerItem for easy access.">player</a>-&gt;<a class="code" href="class_player_item.html#a8105d3ce50d453c1396975e83032bc74" title="Sets the image for the user&#39;s face.">setFace</a>(image);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">void</span> FaceInvadersScene::setHighScore(<span class="keywordtype">int</span> score)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    m_highScore = score;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a1eca7a8be13e06d9dcb9c10a683b8aef">  198</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a1eca7a8be13e06d9dcb9c10a683b8aef" title="Draws background for the game.">FaceInvadersScene::drawBackground</a>(QPainter *painter, <span class="keyword">const</span> QRectF &amp;rect)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    painter-&gt;fillRect(rect, Qt::black);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    painter-&gt;drawImage(QRect(0,-5,600,450), *<a class="code" href="class_face_invaders_scene.html#ab1bde6b272df7b8f60f9164116c5b352" title="Image to be painted as the background.">background</a>, <a class="code" href="class_face_invaders_scene.html#ab1bde6b272df7b8f60f9164116c5b352" title="Image to be painted as the background.">background</a>-&gt;rect());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="code" href="class_face_invaders_scene.html#a4a285f1414516ac56e39551c5f2e03ae">  204</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_scene.html#a4a285f1414516ac56e39551c5f2e03ae" title="Makes sure the score is always visible and does not run off the viewable area.">FaceInvadersScene::updateScorePosition</a>()</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;{</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;setPos(<a class="code" href="class_face_invaders_scene.html#a7c1e410e17b76d14f41ade44fe355903" title="The size of the graphics scene, larger values result in more detailed graphics and smaller invaders...">m_gameSize</a>.width()-<a class="code" href="class_face_invaders_scene.html#a8fd663fd681c2437c8391a67dfc41281" title="Displays game score.">m_scoreItem</a>-&gt;boundingRect().width()-10, 0);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#abd8e283f95f4c52cf143f31497da613e">  209</a></span>&#160;<a class="code" href="class_face_invaders_widget.html#abd8e283f95f4c52cf143f31497da613e" title="Constructor.">FaceInvadersWidget::FaceInvadersWidget</a>(QWidget *parent) :</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    QGraphicsView(parent), m_scene(new <a class="code" href="class_face_invaders_scene.html" title="Manages game logic and graphical scene.">FaceInvadersScene</a>(this)),</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    m_secondsBetweenGagmes(<a class="code" href="class_face_invaders_widget.html" title="UI class for displaying the FaceInvaders game.">FaceInvadersWidget</a>::DefaultTimeBetweenGames),</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    m_initScreenSeconds(<a class="code" href="class_face_invaders_widget.html" title="UI class for displaying the FaceInvaders game.">FaceInvadersWidget</a>::DefaultInitScreenTime)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    this-&gt;setScene(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    this-&gt;setRenderHint(QPainter::Antialiasing);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    this-&gt;setViewport(<span class="keyword">new</span> QGLWidget(QGLFormat(QGL::SampleBuffers)));</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    this-&gt;setViewportUpdateMode(QGraphicsView::FullViewportUpdate);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    connect(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#aca40fb8f38d20466398e32a1ae97f0fb" title="See FaceInvadersScene::gameOver()">gameOver</a>(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#aca40fb8f38d20466398e32a1ae97f0fb" title="See FaceInvadersScene::gameOver()">gameOver</a>(<span class="keywordtype">int</span>)));</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    connect(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#aaf7d741447b5e537b2d916686662a659" title="See FaceInvadersScene::gamePaused()">gamePaused</a>()), <span class="keyword">this</span>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#aaf7d741447b5e537b2d916686662a659" title="See FaceInvadersScene::gamePaused()">gamePaused</a>()));</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    connect(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#ac98c495a0bfb813461a52a30c5132d31" title="Indicates game state transition from stopped to playing">gameStarted</a>(<span class="keywordtype">bool</span>)), <span class="keyword">this</span>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#ac98c495a0bfb813461a52a30c5132d31" title="Indicates game state transition from stopped to playing">gameStarted</a>(<span class="keywordtype">bool</span>)));</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">//For Displaying GameOver message</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    connect(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#aca40fb8f38d20466398e32a1ae97f0fb" title="See FaceInvadersScene::gameOver()">gameOver</a>(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(update()));</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    connect(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>, SIGNAL(<a class="code" href="class_face_invaders_widget.html#aca40fb8f38d20466398e32a1ae97f0fb" title="See FaceInvadersScene::gameOver()">gameOver</a>(<span class="keywordtype">int</span>)), <span class="keyword">this</span>, SLOT(<a class="code" href="class_face_invaders_widget.html#ab3f7a636818d269b5ac3193d0402f30a" title="Initializes countdown timer for new game.">m_gameOver</a>(<span class="keywordtype">int</span>)));</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">//Timers</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    connect(&amp;m_initTimer, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(<a class="code" href="class_face_invaders_widget.html#a4e97ae57780b783cd4eec43d727ad204" title="Updates countdown for user face image acquisition.">initTimerExpired</a>()));</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    connect(&amp;m_restartTimer, SIGNAL(timeout()), <span class="keyword">this</span>, SLOT(<a class="code" href="class_face_invaders_widget.html#ac2cb3d2813d900f940218f7282865b57" title="Updates countdown for starting new game.">resetTimerExpired</a>()));</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    QSettings settings;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordtype">int</span> score = settings.value(<span class="stringliteral">&quot;faceinvaders/highscore&quot;</span>, 0).toInt();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;setHighScore(score);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;FaceInvadersWidget::~FaceInvadersWidget()</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    QSettings settings;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    settings.setValue(<span class="stringliteral">&quot;faceinvaders/highscore&quot;</span>, <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;getHighScore());</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a32b579ff80d821883c55c32cb3ff1388">  243</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_face_invaders_widget.html#a32b579ff80d821883c55c32cb3ff1388" title="Used to maintain aspect ratio of widget, See QT Docs">FaceInvadersWidget::heightForWidth</a>(<span class="keywordtype">int</span> w)<span class="keyword"> const</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> w;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a79e4888e15c4ea212d9c65a71bc8549b">  249</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a79e4888e15c4ea212d9c65a71bc8549b" title="Used to maintain aspect ratio, See QT Docs">FaceInvadersWidget::resizeEvent</a>(QResizeEvent *)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;setSceneRect(0, 0, 600, 440);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    this-&gt;fitInView(0, 0, 600, 440, Qt::KeepAspectRatio);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a2aba93d23afa97c872669722ec24c344">  255</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a2aba93d23afa97c872669722ec24c344" title="Displays Game Over message.">FaceInvadersWidget::drawForeground</a>(QPainter *painter, <span class="keyword">const</span> QRectF &amp;rect)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;{</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span>(m_initScreen)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        QRectF gameRect = <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#a13a4124aaa5c771ebcb471d6c8404cd8" title="Returns rectangle of the game space.">getGameScreenSize</a>();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        QRectF rect2(gameRect.width()/4, gameRect.height()/4,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    gameRect.width()/2, gameRect.height()/2);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        QPen pen(Qt::black);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        pen.setWidth(3);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        QBrush brush(QColor(0,0,0,196));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        painter-&gt;setBrush(brush);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        painter-&gt;drawRoundedRect(rect2, 8, 8);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        QRectF textRect(rect2.width()/8+rect2.x(),</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                        rect2.height()/16+rect2.y(),</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                        3*rect2.width()/4,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                        rect2.width()/8);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        QFont f(<span class="stringliteral">&quot;Helvetica&quot;</span>, 20, QFont::Bold);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        pen.setColor(QColor(255,255,255,230));</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        painter-&gt;setFont(f);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;Smile!&quot;</span>), QTextOption(Qt::AlignCenter));</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        textRect.adjust(-rect2.width()/16, rect2.height()/6,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                        rect2.width()/8, rect2.height()/4);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        f.setPointSize(8);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        painter-&gt;setFont(f);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        pen.setColor(QColor(0xFA, 0xED, 0x57));</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;At the end of the timer, your image will be captured.&quot;</span>), QTextOption(Qt::AlignLeft));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        QPixmap *playerPixmap = <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#a0d4282c5b1e179f1c5f4354face8094c" title="Get Player image.">getPlayerImage</a>();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        QPointF imagePoint(rect2.x() + rect2.width()/2-playerPixmap-&gt;width()/2,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                           textRect.y()+rect2.height()/6);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        painter-&gt;drawPixmap(imagePoint, *playerPixmap);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        painter-&gt;setBrush(Qt::transparent);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        painter-&gt;drawRect(QRectF(imagePoint, playerPixmap-&gt;size()));</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        textRect.setY(imagePoint.y() + playerPixmap-&gt;height() + rect2.height()/16);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        textRect.setHeight(rect2.height()/8);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;Capturing image in %1....&quot;</span>).arg(m_initScreenCountDown), QTextOption(Qt::AlignCenter));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#a71af6e431a3acf2b8e005776360e8d89" title="Returns the current state of the game.">getState</a>() != FaceInvadersScene::Playing)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        QRectF gameRect = <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#a13a4124aaa5c771ebcb471d6c8404cd8" title="Returns rectangle of the game space.">getGameScreenSize</a>();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        QRectF rect2(gameRect.width()/4, gameRect.height()/4,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                    gameRect.width()/2, gameRect.height()/2);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        QPen pen(Qt::black);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        pen.setWidth(3);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        QBrush brush(QColor(0,0,0,196));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        painter-&gt;setBrush(brush);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        painter-&gt;drawRoundedRect(rect2, 8, 8);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        QRectF textRect(rect2.width()/8+rect2.x(),</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        rect2.height()/16+rect2.y(),</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        3*rect2.width()/4,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        rect2.width()/8);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        QFont f(<span class="stringliteral">&quot;Helvetica&quot;</span>, 20, QFont::Bold);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        pen.setColor(QColor(255,255,255,230));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        painter-&gt;setFont(f);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;Game Over&quot;</span>), QTextOption(Qt::AlignCenter));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        textRect.adjust(0,rect2.height()/4,0,rect2.height()/4);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        f.setPointSize(12);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        painter-&gt;setFont(f);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        pen.setColor(QColor(0xFA, 0xED, 0x57));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;Your Score: %1&quot;</span>).arg(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#ae1b788035f287095a64170191ccb1f69" title="Returns the score of the game.">getGameScore</a>(),5,10,QChar(<span class="charliteral">&#39;0&#39;</span>)), QTextOption(Qt::AlignLeft));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        pen.setColor(QColor(0x82, 0xC1, 0xE8));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        textRect.adjust(0, rect2.height()/8, 0, rect2.height()/8);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;Highest Score: %1&quot;</span>).arg(<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;getHighScore()), QTextOption(Qt::AlignLeft));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        f.setPointSize(10);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        pen.setColor(Qt::white);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        painter-&gt;setFont(f);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        painter-&gt;setPen(pen);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        textRect.adjust(0, rect2.height()/4, 0, rect2.height()/4);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        painter-&gt;drawText(textRect, QString(<span class="stringliteral">&quot;NEW game begins in %1...&quot;</span>).arg(<a class="code" href="class_face_invaders_widget.html#a005cda22f577b66604200e10e06ced1f" title="Maintains count down for starting new game.">m_secondsToRestart</a>), QTextOption(Qt::AlignLeft));</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#ab3f7a636818d269b5ac3193d0402f30a">  347</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#ab3f7a636818d269b5ac3193d0402f30a" title="Initializes countdown timer for new game.">FaceInvadersWidget::m_gameOver</a>(<span class="keywordtype">int</span> score)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;{</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">//Begin timer for game reset</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    m_restartTimer.start(1000);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="class_face_invaders_widget.html#a005cda22f577b66604200e10e06ced1f" title="Maintains count down for starting new game.">m_secondsToRestart</a> = 8;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#ac2cb3d2813d900f940218f7282865b57">  354</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#ac2cb3d2813d900f940218f7282865b57" title="Updates countdown for starting new game.">FaceInvadersWidget::resetTimerExpired</a>()</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;{</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="class_face_invaders_widget.html#a005cda22f577b66604200e10e06ced1f" title="Maintains count down for starting new game.">m_secondsToRestart</a>--;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    this-&gt;viewport()-&gt;update();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="class_face_invaders_widget.html#a005cda22f577b66604200e10e06ced1f" title="Maintains count down for starting new game.">m_secondsToRestart</a> == 0)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">//Start new game</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        m_restartTimer.stop();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="class_face_invaders_scene.html" title="Manages game logic and graphical scene.">FaceInvadersScene</a> *scene = <span class="keyword">static_cast&lt;</span><a class="code" href="class_face_invaders_scene.html" title="Manages game logic and graphical scene.">FaceInvadersScene</a>*<span class="keyword">&gt;</span>(this-&gt;scene());</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        scene-&gt;<a class="code" href="class_face_invaders_scene.html#aa5137d20e10f027bb0e9320bb4150005" title="Transitions the game into initial state.">resetGame</a>();</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        scene-&gt;<a class="code" href="class_face_invaders_scene.html#aa8a9e24901bdd1fd6b38a002ed41c006" title="Transitions the game tion playing state.">beginGame</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a4e97ae57780b783cd4eec43d727ad204">  368</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a4e97ae57780b783cd4eec43d727ad204" title="Updates countdown for user face image acquisition.">FaceInvadersWidget::initTimerExpired</a>()</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    m_initScreenCountDown--;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    this-&gt;viewport()-&gt;update();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span>(m_initScreenCountDown == 0)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        m_initTimer.stop();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="comment">//Start game</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        this-&gt;<a class="code" href="class_face_invaders_widget.html#a898cfdf860189e1d680729d900d06640" title="Calls FaceInvadersScene::beginGame()">beginGame</a>();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        m_initScreen = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        emit <a class="code" href="class_face_invaders_widget.html#a229fecb49378a4ea7ea29504f982536f" title="Indicates that the class no longer wants to recieve updates for the player image.">ceaseImageUpdates</a>();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;}</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#abb2fbada3dba51f3ac823a41e092fc19">  382</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#abb2fbada3dba51f3ac823a41e092fc19" title="Calls FaceInvadersScene::resetGame()">FaceInvadersWidget::resetGame</a>()</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;}</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a9070088a0c135c5ac80e30dcd478ea74">  386</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a9070088a0c135c5ac80e30dcd478ea74" title="Calls FaceInvadersScene::pauseGame()">FaceInvadersWidget::pauseGame</a>()</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a920e7d25fc782c8e67f2131099b9309f">  390</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a920e7d25fc782c8e67f2131099b9309f" title="Calls FaceInvadersScene::endGame()">FaceInvadersWidget::endGame</a>()</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;{</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a898cfdf860189e1d680729d900d06640">  395</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a898cfdf860189e1d680729d900d06640" title="Calls FaceInvadersScene::beginGame()">FaceInvadersWidget::beginGame</a>()</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#aa8a9e24901bdd1fd6b38a002ed41c006" title="Transitions the game tion playing state.">beginGame</a>();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a431a1c398b26c2ba91bfe9b2e23fc2e8">  400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a431a1c398b26c2ba91bfe9b2e23fc2e8" title="Calls FaceInvadersScene::updatePlayerPosition()">FaceInvadersWidget::updatePlayerPosition</a>(QPoint position)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    this-&gt;<a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#a2d6e81e83be4f2a2fd4cd1789c2aa62f" title="Updates the position of the player (only x-position!)">updatePlayerPosition</a>(position);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#afd0bce36c0df5d6f8786ba433d4bc2a0">  405</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a431a1c398b26c2ba91bfe9b2e23fc2e8" title="Calls FaceInvadersScene::updatePlayerPosition()">FaceInvadersWidget::updatePlayerPosition</a>(QRect position)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span>(position.isValid())</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        this-&gt;<a class="code" href="class_face_invaders_widget.html#a431a1c398b26c2ba91bfe9b2e23fc2e8" title="Calls FaceInvadersScene::updatePlayerPosition()">updatePlayerPosition</a>(position.center());</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a1d1f0f72330b57f0d58767ed8df5fb92">  411</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a1d1f0f72330b57f0d58767ed8df5fb92" title="Shows a brief screen to acquire user image.">FaceInvadersWidget::initScreen</a>()</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    m_restartTimer.stop();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    m_initScreen = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    m_initScreenCountDown = m_initScreenSeconds;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#aa5137d20e10f027bb0e9320bb4150005" title="Transitions the game into initial state.">resetGame</a>();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    this-&gt;viewport()-&gt;update();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    m_initTimer.start(1000);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    emit <a class="code" href="class_face_invaders_widget.html#a5f52682e8d1dfaeb5ade42dc75d216f2" title="Indicates that the class wants to recieve updates for the player iamge.">faceImageUpdatesRequest</a>();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="code" href="class_face_invaders_widget.html#a023af44e508a249115a3ddc6252ef786">  424</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_face_invaders_widget.html#a023af44e508a249115a3ddc6252ef786" title="Sets the player image.">FaceInvadersWidget::updatePlayerImage</a>(QImageSharedPointer image)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;{</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span>(image.data() == NULL)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="class_face_invaders_widget.html#ad7133bf14af4f7f6f19f0c3aea998f43" title="The game graphics scene.">m_scene</a>-&gt;<a class="code" href="class_face_invaders_scene.html#a87af093f26eae22e01bc05eb64019700" title="Sets the player image.">setPlayerImage</a>(QPixmap::fromImage(*image));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    this-&gt;viewport()-&gt;update();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="code" href="class_player_item.html#ae3bfc3fea2d5480a18631299db21a9e8">  434</a></span>&#160;<a class="code" href="class_player_item.html#ae3bfc3fea2d5480a18631299db21a9e8" title="Constructor.">PlayerItem::PlayerItem</a>(QGraphicsItem *parent, QGraphicsScene *scene) :</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    QGraphicsItem(parent, scene)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;{</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a> = <span class="keyword">new</span> QPixmap(<span class="stringliteral">&quot;:/images/defaultUser.png&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="code" href="class_player_item.html#a79a3482009b4887a0b74a5deaecbe78e">  440</a></span>&#160;<a class="code" href="class_player_item.html#a79a3482009b4887a0b74a5deaecbe78e" title="Destructor.">PlayerItem::~PlayerItem</a>()</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">delete</span> <a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno"><a class="code" href="class_player_item.html#aa06d4b232d4c51bf2b91af695ea27372">  445</a></span>&#160;QRectF <a class="code" href="class_player_item.html#aa06d4b232d4c51bf2b91af695ea27372" title="Bounding rectangle of the drawing area, See QT Docs">PlayerItem::boundingRect</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">return</span> QRectF(-32,-32,64,64);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;}</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno"><a class="code" href="class_player_item.html#a2ffa78c17a98484710af6bb212687bc2">  450</a></span>&#160;QPainterPath <a class="code" href="class_player_item.html#a2ffa78c17a98484710af6bb212687bc2" title="Accurate representation of the item, See QT Docs">PlayerItem::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    QPainterPath path;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    path.addRect(-32,-32,64,64);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> path;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="code" href="class_player_item.html#a21a887d96431aff97e2fdc6b3a6f634c">  457</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_player_item.html#a21a887d96431aff97e2fdc6b3a6f634c" title="Drawing of the item, See QT Docs">PlayerItem::paint</a>(QPainter *painter, <span class="keyword">const</span> QStyleOptionGraphicsItem *, QWidget *)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    painter-&gt;drawPixmap(QPoint(-32,-32), *<a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a>, QRect(0,0,64,64));</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span>(hit)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        painter-&gt;setPen(Qt::red);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        painter-&gt;drawRect(-32,-32,64,64);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno"><a class="code" href="class_player_item.html#a8105d3ce50d453c1396975e83032bc74">  467</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_player_item.html#a8105d3ce50d453c1396975e83032bc74" title="Sets the image for the user&#39;s face.">PlayerItem::setFace</a>(<span class="keyword">const</span> QPixmap &amp;image)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;{</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">delete</span> <a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span>(image.width() &gt; image.height())</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a> = <span class="keyword">new</span> QPixmap(image.scaledToWidth(64));</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a> = <span class="keyword">new</span> QPixmap(image.scaledToHeight(64));</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="code" href="class_player_item.html#a553898aaf5a5d672b819fa95d3e2387e">  477</a></span>&#160;QPixmap *<a class="code" href="class_player_item.html#a553898aaf5a5d672b819fa95d3e2387e" title="Gets the face image of the player.">PlayerItem::getFace</a>()</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_player_item.html#a6a746c663def54a01816ebda3a2dbea1" title="User face image.">m_face</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="code" href="class_player_item.html#a2b333821a76cc14e3b9e31866f6da50a">  482</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_player_item.html#a2b333821a76cc14e3b9e31866f6da50a" title="Used for collision detection.">PlayerItem::advance</a>(<span class="keywordtype">int</span> phase)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    QList&lt;QGraphicsItem*&gt; colliding = this-&gt;collidingItems();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    hit = (colliding.size() &gt; 0);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">foreach</span>(QGraphicsItem* item, colliding)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="class_invader.html">Invader</a>* inv = (<a class="code" href="class_invader.html">Invader</a>*)item;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">if</span>(inv-&gt;getType() == Invader::Bug)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        {</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            emit <a class="code" href="class_player_item.html#a5fdef6610e019751be22563952335ec2" title="Indicates the player has collided with an Invader.">PlayerHit</a>();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            inv-&gt;absorbReward();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;}</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno"><a class="code" href="class_invader.html#aa77c5d4a253bfa7efddd36463c37afd1">  501</a></span>&#160;<a class="code" href="class_invader.html#aa77c5d4a253bfa7efddd36463c37afd1" title="Default Constructor.">Invader::Invader</a>(QGraphicsItem *parent, QGraphicsScene *scene) :</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    QGraphicsItem(parent, scene)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;{</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    qsrand(QTime::currentTime().msec());</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordtype">int</span> type = rand()%(InvaderTypeCount+5);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span>(type &gt;= Bug)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="class_invader.html#a7622bcca0d20ab02fcd2d88a004011ec" title="Indicates the type of invader represented.">m_type</a> = Bug;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="class_invader.html#a7622bcca0d20ab02fcd2d88a004011ec" title="Indicates the type of invader represented.">m_type</a> = (<a class="code" href="class_invader.html#ab2bc7c65876682e29453b56a440c9239" title="Identifies the type of invader.">InvaderType</a>)type;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <a class="code" href="class_invader.html#a8d81cc44f75599f4ab11e2412d496574" title="The rate of falling from top to bottom of the Invader.">m_fallVelocity</a> = (qreal)(rand()%1000)/100+3;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="class_invader.html#a3c224f6143b6ad5d1a995c7ef70b8489" title="The rate of rotation of the Invader.">m_angularVelocity</a> = (qreal)(rand()%1415)/1000;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="class_invader.html#ab940fbaa4446e0cc220668f4481cd19c" title="The points awarded to player to evading.">m_pointValue</a> = rand()%10;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="class_invader.html#a7622bcca0d20ab02fcd2d88a004011ec" title="Indicates the type of invader represented.">m_type</a>)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">case</span> Apple:</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        initApple();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">case</span> Banana:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        initBanana();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">case</span> Watermelon:</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        initWatermelon();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <span class="keywordflow">case</span> Bug:</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        initBug();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="comment">/* Should never happen, just default to Apple I guess */</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="class_invader.html#a7622bcca0d20ab02fcd2d88a004011ec" title="Indicates the type of invader represented.">m_type</a> = Bug;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        initApple();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="code" href="class_invader.html#a3a5de7b32f8fc794426a81f7658fd5b9">  537</a></span>&#160;<a class="code" href="class_invader.html#a3a5de7b32f8fc794426a81f7658fd5b9" title="Destructor.">Invader::~Invader</a>()</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keyword">delete</span> <a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="code" href="class_invader.html#ad34322bcf625972fece6dc3ce2e9b742">  542</a></span>&#160;QRectF <a class="code" href="class_invader.html#ad34322bcf625972fece6dc3ce2e9b742" title="Defines the drawing area of the invader.">Invader::boundingRect</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_invader.html#a9fb3ceb753808d4f786507584a5d7022" title="The bounding rectangle of the invader.">m_boundingRect</a>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno"><a class="code" href="class_invader.html#a2c813bd4d237599543f89325f4d5793f">  547</a></span>&#160;QPainterPath <a class="code" href="class_invader.html#a2c813bd4d237599543f89325f4d5793f" title="Defines the collision detection shape of the invader.">Invader::shape</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_invader.html#a34b57b0ccf919e41414dca5c3c0100f1" title="The shape of the invader.">m_shape</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="keywordtype">void</span> Invader::paint(QPainter *painter, <span class="keyword">const</span> QStyleOptionGraphicsItem *option, QWidget *widget)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    painter-&gt;drawPixmap(<a class="code" href="class_invader.html#a9fb3ceb753808d4f786507584a5d7022" title="The bounding rectangle of the invader.">m_boundingRect</a>.topLeft(), *<a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a>, <a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a>-&gt;rect());</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">#ifdef DEBUG_INVADER_SHAPE</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor"></span>    painter-&gt;drawPath(<a class="code" href="class_invader.html#a34b57b0ccf919e41414dca5c3c0100f1" title="The shape of the invader.">m_shape</a>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<a class="code" href="class_invader.html#ab2bc7c65876682e29453b56a440c9239" title="Identifies the type of invader.">Invader::InvaderType</a> Invader::getType()<span class="keyword"> const</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_invader.html#a7622bcca0d20ab02fcd2d88a004011ec" title="Indicates the type of invader represented.">m_type</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="keywordtype">int</span> Invader::absorbReward()</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    this-&gt;scene()-&gt;removeItem(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    emit <a class="code" href="class_invader.html#a926649933a14f9f141e32143009be011" title="Notify scene of player successfully evading the invader.">AlienDying</a>(<a class="code" href="class_invader.html#ab940fbaa4446e0cc220668f4481cd19c" title="The points awarded to player to evading.">m_pointValue</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno"><a class="code" href="class_invader.html#ad47fd4eb4d7808eba8ee7a65f2021b2d">  573</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_invader.html#ad47fd4eb4d7808eba8ee7a65f2021b2d" title="Used for animation.">Invader::advance</a>(<span class="keywordtype">int</span> phase)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;{</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span>(phase == 0)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    qreal deathLine = <span class="keyword">static_cast&lt;</span><a class="code" href="class_face_invaders_scene.html" title="Manages game logic and graphical scene.">FaceInvadersScene</a>*<span class="keyword">&gt;</span>(this-&gt;scene())-&gt;getInvaderDeathLine();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span>(this-&gt;pos().y() &gt; deathLine)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="class_invader.html#a7622bcca0d20ab02fcd2d88a004011ec" title="Indicates the type of invader represented.">m_type</a> == Bug)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            absorbReward();</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            this-&gt;scene()-&gt;removeItem(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            <span class="keyword">delete</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    setPos(mapToParent(0, <a class="code" href="class_invader.html#a8d81cc44f75599f4ab11e2412d496574" title="The rate of falling from top to bottom of the Invader.">m_fallVelocity</a>));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;}</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="keywordtype">void</span> Invader::initApple()</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;{</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a> = <span class="keyword">new</span> QPixmap(<span class="stringliteral">&quot;:/images/invaders/AppleInvader.png&quot;</span>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="class_invader.html#a9fb3ceb753808d4f786507584a5d7022" title="The bounding rectangle of the invader.">m_boundingRect</a> = QRectF(-32,-32,64,64);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="class_invader.html#a34b57b0ccf919e41414dca5c3c0100f1" title="The shape of the invader.">m_shape</a>.addEllipse(-23,-20,50,50);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="keywordtype">void</span> Invader::initBanana()</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a> = <span class="keyword">new</span> QPixmap(<span class="stringliteral">&quot;:/images/invaders/BananaInvader.png&quot;</span>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="class_invader.html#a9fb3ceb753808d4f786507584a5d7022" title="The bounding rectangle of the invader.">m_boundingRect</a> = QRectF(-32,-32,64,64);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <a class="code" href="class_invader.html#a34b57b0ccf919e41414dca5c3c0100f1" title="The shape of the invader.">m_shape</a>.addRect(-26,-16,58,30);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="keywordtype">void</span> Invader::initWatermelon()</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a> = <span class="keyword">new</span> QPixmap(<span class="stringliteral">&quot;:/images/invaders/WatermelonInvader.png&quot;</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="class_invader.html#a9fb3ceb753808d4f786507584a5d7022" title="The bounding rectangle of the invader.">m_boundingRect</a> = QRectF(-32,-32,64,64);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="class_invader.html#a34b57b0ccf919e41414dca5c3c0100f1" title="The shape of the invader.">m_shape</a>.addEllipse(-30,-30,60,60);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="keywordtype">void</span> Invader::initBug()</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="class_invader.html#a259d8abc6a075620bbd1fb369487d476" title="Image of the invader.">m_image</a> = <span class="keyword">new</span> QPixmap(<span class="stringliteral">&quot;:/images/invaders/BugInvader.png&quot;</span>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="class_invader.html#a9fb3ceb753808d4f786507584a5d7022" title="The bounding rectangle of the invader.">m_boundingRect</a> = QRectF(-32,-32,64,64);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="class_invader.html#a34b57b0ccf919e41414dca5c3c0100f1" title="The shape of the invader.">m_shape</a>.addRect(-32,-32,64,64);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><b>faceinvaderswidget.cpp</b></li>
    <li class="footer">Generated on Sun Apr 28 2013 19:50:07 for Lockheed Inanimation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
